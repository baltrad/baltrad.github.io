<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Configuration</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="BALTRAD-doxlogo.png"></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Frequently Asked Questions and User Guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Configuration </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section date"><dt>Date</dt><dd>May 2019 </dd></dl>
<dl class="section version"><dt>Version</dt><dd>3.0</dd></dl>
<p>Congratulations! If you've come this far, it means you've succesfully followed the instructions in <a class="el" href="install.html">Installation</a> and you have a node that is up and running. Your next responsibility is to configure it both for increased safety and to get it working. This involves a bit of manual labour, given in the following sections.</p>
<ul>
<li><a class="el" href="config.html#con_pwd">Change the admin's password</a> </li>
<li><a class="el" href="config.html#con_ns">Configure your node settings</a> </li>
<li><a class="el" href="config.html#con_os">Add ODIM source definitions</a> </li>
<li><a class="el" href="config.html#con_rad">Add a radar or several</a> </li>
<li><a class="el" href="config.html#con_ds">Add one or several data sources</a> </li>
<li><a class="el" href="config.html#con_lr">Keeping the system log clean</a> </li>
<li><a class="el" href="config.html#con_dr">Keeping the delivery registry clean</a> </li>
<li><a class="el" href="config.html#con_dat">Getting your own data into your node</a> </li>
<li><a class="el" href="config.html#con_clean">Prevent your disks from filling up</a></li>
</ul>
<h1><a class="anchor" id="con_pwd"></a>
Change the admin's password</h1>
<p>This is the first thing you should do. Your node comes with a pre-configured user called <code>admin</code>, and this user's password is 'baltrad'. You have to log on using the web-based user interface and change it to something only you know.</p>
<p>From the main menu placed in the left column, click "User accounts" --&gt; "Edit user" link (located in the "Settings" section). There you'll see the <code>admin</code> user and a link to the right called "Change" under the heading "Password". Use a safe password, and store it in a safe place that you remember.</p>
<h1><a class="anchor" id="con_ns"></a>
Configure your node settings</h1>
<p>Click "Node settings" from the left-column menu. This is where you should identify your node properly. If you didn't build your node with <code>&ndash;nodename</code>, then your default node name will be your computer's <code>hostname</code>. Your node should be type "Primary".</p>
<p>The "node address" is very important. If the URI contains "localhost" or 127.0.0.1, then it is vital that you change this to the IP number or network name that external computers can use to communicate with it. Failing to do this will cause data exchange errors.</p>
<p>The pure text fields accept non-ASCII characters like &aring;, &aelig;, and &oslash;. Add the correct details of your organization. There's no reason to change the work directory. The e-mail address is not used currently, but you should enter a valid one anyway.</p>
<h1><a class="anchor" id="con_os"></a>
Add ODIM source definitions</h1>
<p>The node comes with a set of European weather radar identifiers. These are found in an XML file in the RAVE package, so you should have installed or at least downloaded RAVE. If you are interested in adding more radars to this file, you are welcome to do so and submit them to us!</p>
<p>Your database must be configured with this information, and the procedure is manual. On the command-line, taking care that your paths and the URI to your database are correct, run: </p><pre class="fragment">/opt/baltrad/baltrad-db/bin/baltrad-bdb-client \
  import_sources \
  --url=http://localhost:8090 \
  /opt/baltrad/rave/config/odim_source.xml
</pre><p> This will take a few seconds, and it won't tell you anything if all goes well.</p>
<h1><a class="anchor" id="con_rad"></a>
Add a radar or several</h1>
<p>You only need to do this with your own radars. It might be relevant for radars operated by other organizations too if you plan on forwarding their data to other nodes, but we will only deal with your data here for the sake of simplicity.</p>
<p>Select "Radars" from the main menu and "Add" to define a new radar. The selection of radars is predefined based on the set of European weather radar identifiers, also used in RAVE package. These identifiers are found in an XML file being a copy of a file used by RAVE. Click on the center identifier in the left column to expand the list of radar stations available for the selected center. Select a desired radar and click the "Save" button. Radar station will be saved in local database.</p>
<div class="image">
<img src="radars_add.png" alt=""/>
</div>
<h1><a class="anchor" id="con_ds"></a>
Add one or several data sources</h1>
<p>We use "data sources" in BALTRAD for identifying data that are available for exchange. You associate a data source with different types of data, e.g. a polar scan or volume, and then you can expose them selectively to other nodes via their peer users that connect to your node. We'll deal with the peer users later.</p>
<p>In order to define a data source, select "Data sources" --&gt; "Add" from the "Settings" section of the main menu. The example uses Polish radar located in Legionowo, as shown in the image below.</p>
<div class="image">
<img src="data_source_add.png" alt=""/>
</div>
<p>Start by adding a source name and description. Then continue by associating selected radar with it. To achieve this, select desired radar from the "Available radar stations" and click the "&gt;" button to add the radar. Selected radar will be moved to "Selected radar stations" list. In order to remove radar from selection, use the button marked with "&lt;" sign. The same approach is applied to the selection of the remaining data source parameters.</p>
<p>Next specify what type of data from this radar are relevant for exchange. If your radar sends you data one scan at a time, then select "SCAN". If the radar sends a complete polar volume all at once, then select "PVOL". Don't worry about the other menu items for now. Then you link users to this data source. Note that only peer users can be linked with a data source (it is not possible to assign local users like "admin" or "operator" to a data source). Finally, click "Save" to store the data source.</p>
<p>Editing data sources is done with the same procedure. To edit an existing data source, select "Data sources" and "Edit" from the main menu.</p>
<p>You can combine several radars into one data source. Likewise, you can combine several types of data in a single data source. A <b>warning</b>, however, that it's unwise to combine polar scans and polar volumes in the same data source. Normally, you will be required to create a process where polar volumes are created with data from radars that send you data scan by scan. If another node is subscribing to both types of polar data from the same data source, then it means they'll receive the same data twice.</p>
<h1><a class="anchor" id="con_lr"></a>
Keeping the system log clean</h1>
<p>You should configure your system log so that it doesn't overflow with messages. This is done by selecting "Messages" --&gt; "Configure" from the "Settings" section of the main menu. </p><div class="image">
<img src="logs_conf.png" alt=""/>
</div>
<h1><a class="anchor" id="con_dr"></a>
Keeping the delivery registry clean</h1>
<p>You should configure your delivery registry so that it doesn't overflow with messages. This registry contains all information on successful and failed data transfers. Configuring the registry's size is done by selecting "Delivery registry" --&gt; "Configure" from the "Settings" section of the main menu. </p><div class="image">
<img src="dr_conf.png" alt=""/>
</div>
<h1><a class="anchor" id="con_dat"></a>
Getting your own data into your node</h1>
<p>In a later chapter, we'll get into how two nodes can exchange data through subscriptions, but you have to get your own data into your node first. We offer you a "back door" whereby data are added using a secure <em>injection</em> mechanism.</p>
<p>But before you inject your data, they must be converted to the ODIM_H5 file format. There are several good converters available from within the community and from manufacturers. Ask around if anyone has already succeeded in converting from the format that your radar uses; chances are good that someone has something you can use.</p>
<p>We will assume that you are going to inject data from the same machine, in other words data are on the same machine as the BALTRAD node that will receive them. We offer you two injectors for this:</p>
<ul>
<li>The <b>OdimH5</b> package. This is a stand-alone Java application that both converts from the Rainbow 5 format, and also injects ODIM_H5 files. The convertion process is optional. You can use OdimH5 on the command line to process individual files, or you can use it as a daemon to monitor an input directory and process the files that are put there. Please see the OdimH5 documentation on how to install, configure, and use it.</li>
</ul>
<ul>
<li>The <b>odim_injector</b> in the RAVE package. You'll find it in RAVE's 'bin' directory. Note that you don't need your node's whole software installation, just the RAVE package and RAVEs dependencies like hlhdf and pyinotify. Run <pre class="fragment">$ odim_injector --help
</pre> to see what options you have.</li>
</ul>
<p><b>odim_injector</b> is based on the file based inotify which means that it will react each time a file is placed in a specific directory. This means that each time a file is placed in the specified directory, an atempt will be made to inject the file into the dex node by using the rave baltrad injector.</p>
<p>Both injectors work from remote computers, ie. not the same machine as the one running your BALTRAD node. If this is how you want to do it, then you have to ensure that the injector you choose is propery configured when it comes to communication security, which is covered in <a class="el" href="secure.html">Security in BALTRAD</a>.</p>
<h1><a class="anchor" id="con_clean"></a>
Prevent your disks from filling up</h1>
<p>A classic problem that causes systems to stop working is that the computer's disks become full. In BALTRAD, its your database (BDB subsystem) that stores your data. It's very easy to configure it to a comfortable size that suits your needs. This is done by creating a new route in "Processing" section of the main menu. Select "Routes" --&gt; "Create DB trim age", e.g. </p><div class="image">
<img src="bdb_age.png" alt=""/>
</div>
<p> Note that when the route has been defined, it must also be scheduled. You don't need to do this scheduling for normal data processing tasks, just the "Create DB trim age" and "Create DB trim count" routes. </p><div class="image">
<img src="bdb_age_sched.png" alt=""/>
</div>
 </div></div><!-- contents -->
</div><!-- PageDoc -->

<hr class="footer"/><address class="footer"><small>
</a><a href="mailto:support@baltrad.eu">support@baltrad.eu</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generated on Mon May 24 2021 22:22:15 by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/> 1.8.17 for <a href="http://baltrad.eu/" target="_blank"><img class="footer" src="foot_BALTRAD-doxlogo.png" /></a></small></address>
</body>
</html>
